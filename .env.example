# ===============================
# Discord
# ===============================

# Bot token from Discord Developer Portal
DISCORD_TOKEN=YOUR_DISCORD_BOT_TOKEN

# Optional: restrict bot usage to specific channel IDs (comma-separated)
# Leave empty to allow all visible channels
ALLOWED_CHANNEL_IDS=123456789012345678,123456789012345679

# Uncomment to register slash commands to a single guild (recommended for dev)
# SLASH_GUILD_ID=123456789012345678

# ===============================
# General Bot Tuning
# ===============================
# Cooldown (seconds) between responses
RESPONSE_COOLDOWN_SECONDS=0
FAQ_RESPONSE_COOLDOWN_SECONDS=0

# Thresholds for response / detection logic
DEFAULT_THRESHOLD=0.75
NEAR_MISS_MIN=0.60
NEAR_MISS_MAX=0.74
FAQ_MATCH_THRESHOLD=0.82
FAQ_NEAR_MISS_MIN=0.70
FAQ_NEAR_MISS_MAX=0.82

# ===============================
# Rarity / TPPC Data
# ===============================

# URL hosting the preprocessed rarity JSON
RARITY_JSON_URL=https://example.com/path/to/rarity.json
RARITY4_JSON_URL=https://darknesspwnsu.github.io/tppc-data/data/l4_rarity.json

# How often to check for rarity updates (ms)
RARITY_REFRESH_MS=43200000

# Daily refresh time (America/New_York) in 24h HH:MM format
# TPPC rarity updates between ~6–7 AM ET
RARITY_DAILY_REFRESH_ET=07:10

# "Did you mean..." suggestion tuning
# Higher = stricter suggestions (recommended: 0.55–0.60)
RARITY_SUGGEST_MIN_SCORE=0.60

# Reject suggestions if normalized name length differs too much
RARITY_SUGGEST_MAX_LEN_DIFF=10

# ===============================
# Wiki
# ===============================

# Max wiki search results
WIKI_MAX_RESULTS=5

# ===============================
# Database (MySQL)
# ===============================

# If TRADING_GUILD_ALLOWLIST is empty, DB features are disabled
DB_HOST=127.0.0.1
DB_PORT=3306
DB_USER=bot
DB_PASSWORD=changeme
DB_NAME=tppc

# Optional: connection pool size
# DB_CONNECTION_LIMIT=10

# ===============================
# Forum Integration
# ===============================

FORUM_BASE_URL=https://forums.example.com
FORUM_BOT_USERNAME=ForumBotName
FORUM_BOT_PASSWORD=ForumBotPassword
FORUM_BOT_BCC=OptionalBCCName

# Enable verbose forum logging (true/false)
FORUM_DEBUG=false

# ===============================
# RPG Leaderboards
# ===============================

RPG_USERNAME=your_rpg_username
RPG_PASSWORD=your_rpg_password

# ===============================
# Logging & Telemetry
# ===============================

# Log verbosity: error, warn, info, debug
LOG_LEVEL=error

# Log format: text, json
LOG_FORMAT=text

# Enable metrics counters (true/false)
METRICS_ENABLED=true

# Metrics retention window (days)
METRICS_RETENTION_DAYS=90

# ===============================
# Metrics Export (GitHub Pages)
# ===============================

# Fine-grained GitHub token with repo write access
METRICS_EXPORT_TOKEN=YOUR_GITHUB_FINE_GRAINED_TOKEN

# Repo to publish metrics snapshot into
METRICS_EXPORT_REPO=https://github.com/yourname/your-metrics-repo.git

# Branch to publish to
METRICS_EXPORT_BRANCH=main

# Output path inside the repo
METRICS_EXPORT_PATH=data/generated/metrics_export.json

# Local working directory for cloning the repo
METRICS_EXPORT_DIR=/tmp/spectreon-metrics-export

# How many days to export
METRICS_EXPORT_WINDOW_DAYS=90

# Git identity for export commits
METRICS_EXPORT_GIT_NAME=spectreon-bot
METRICS_EXPORT_GIT_EMAIL=spectreon-bot@users.noreply.github.com

# ===============================
# Whisper Encryption
# ===============================

# Active key id to use for new whisper encryption payloads (default: v1)
# WHISPER_ENC_KEY_ID=v1

# Keyring for whisper encryption (JSON map of key id -> 32-byte key).
# Keys can be 64-char hex or base64 that decodes to 32 bytes.
# Example: {"v1":"<hex or base64>","v2":"<hex or base64>"}
# WHISPER_ENC_KEYS={"v1":"<hex or base64>"}

# Legacy single-key fallback (only used if WHISPER_ENC_KEYS is not set)
# WHISPER_ENC_KEY=<hex or base64>

# To rotate keys, add a new key id + key to WHISPER_ENC_KEYS, then set WHISPER_ENC_KEY_ID
# to the new id. Existing data stays decryptable as long as old keys remain.

# Regenerate a key with:
#   openssl rand -hex 32
# or
#   openssl rand -base64 32
